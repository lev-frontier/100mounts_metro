<!DOCTYPE html>
<html lang="zh-tw">
	<head>
		<meta charset="UTF-8">
		<title>百岳路線圖</title>
		<link rel="stylesheet" type="text/css" href="metro.css">
		<script src="metro.js"></script> 
		<meta name="viewport" content="width=960">
	</head>
	<body onload="SetAllPos();">
		<div id="bgcontanier"></div>
		<div id="mainclipper" align="center">

			<div id="maincontainer" style="height: 2760px;">

				<svg id="contour-layer">
					<defs>
						<filter id="rugged">
							<feTurbulence type="fractalNoise" baseFrequency="0.03" numOctaves="2" result="noise" />
							<feDisplacementMap in="SourceGraphic" in2="noise" scale="5" />
						</filter>
					</defs>
				</svg>
				
				<div id="gridcontainer" style="height: 2760px;">
				</div>
				
				<!------------------------------------------------------------------------------------------->
				<div id="nodecontainer" style="height: 2760px;">
					<div id="RouteMapTitle" class="title" data-col="1" data-row="1" style="color: gray;"></div>	
					<div class="title" data-col="20" data-row="1" style="color: #aaaaaa;">百岳路線圖</div>	
					<div id="summitCountLabel" class="title" data-col="16" data-row="67" style="color: #aaaaaa; text-align: right; right: 40px;">共計<span id="SelectionCount">０００</span>座完登</div>	

					<div class="group" data-x="0" data-y="0">	
						<div class="parkSylvia title" data-col="13" data-row="3">雪霸國家公園</div>					
						<div class="parkSylvia edgeLT" data-col="1" data-row="2"></div>
						<div class="parkSylvia edgeH" data-col="2" data-row="2" style="width:680px"></div>
						<div class="parkSylvia edgeRT" data-col="19" data-row="2"></div>
						<div class="parkSylvia edgeV" data-col="19" data-row="3" style="height:120px"></div>
						<div class="parkSylvia edgeRB" data-col="19" data-row="6"></div>
						<div class="parkSylvia edgeH" data-col="14" data-row="6" style="width:200px"></div>
						<div class="parkSylvia edgeLT" data-col="13" data-row="6"></div>
						<div class="parkSylvia edgeV" data-col="13" data-row="7" style="height:160px"></div>
						<div class="parkSylvia edgeRB" data-col="13" data-row="11"></div>					
						<div class="parkSylvia edgeH" data-col="12" data-row="11" style="width:40px"></div>
						<div class="parkSylvia edgeLT" data-col="11" data-row="11"></div>
						<div class="parkSylvia edgeRB" data-col="11" data-row="12"></div>
						<div class="parkSylvia edgeH" data-col="2" data-row="12" style="width:360px"></div>
						<div class="parkSylvia edgeLB" data-col="1" data-row="12"></div>
						<div class="parkSylvia edgeV" data-col="1" data-row="3" style="height:360px"></div>
					</div>
						
					<div class="group" data-x="0" data-y="0">	
						<div class="parkTaroko title" data-col="17" data-row="25">太魯閣國家公園</div>
						<div class="parkTaroko edgeLT" data-col="16" data-row="7"></div>
						<div class="parkTaroko edgeH" data-col="17" data-row="7" style="width:280px"></div>
						<div class="parkTaroko edgeRT" data-col="24" data-row="7"></div>
						<div class="parkTaroko edgeV" data-col="24" data-row="8" style="height:720px"></div>
						<div class="parkTaroko edgeRB" data-col="24" data-row="26"></div>
						<div class="parkTaroko edgeH" data-col="7" data-row="26" style="width:680px"></div>
						<div class="parkTaroko edgeLB" data-col="6" data-row="26"></div>
						<div class="parkTaroko edgeV" data-col="6" data-row="18" style="height:320px"></div>
						<div class="parkTaroko edgeLT" data-col="6" data-row="17"></div>
						<div class="parkTaroko edgeH" data-col="7" data-row="17" style="width:200px"></div>
						<div class="parkTaroko edgeRB" data-col="12" data-row="17"></div>
						<div class="parkTaroko edgeV" data-col="12" data-row="13" style="height:160px"></div>
						<div class="parkTaroko edgeLT" data-col="12" data-row="12"></div>
						<div class="parkTaroko edgeH" data-col="13" data-row="12" style="width:120px"></div>
						<div class="parkTaroko edgeRB" data-col="16" data-row="12"></div>
						<div class="parkTaroko edgeV" data-col="16" data-row="8" style="height:160px"></div>
					</div>
						
					<div class="group" data-x="0" data-y="0">	
						<div class="parkJade title" data-col="2" data-row="43">玉山國家公園</div>
						<div class="parkJade edgeLT" data-col="1" data-row="42"></div>
						<div class="parkJade edgeH" data-col="2" data-row="42" style="width:640px"></div>
						<div class="parkJade edgeRT" data-col="18" data-row="42"></div>
						<div class="parkJade edgeV" data-col="18" data-row="43" style="height:680px"></div>
						<div class="parkJade edgeRB" data-col="18" data-row="60"></div>
						<div class="parkJade edgeH" data-col="2" data-row="60" style="width:640px"></div>
						<div class="parkJade edgeLB" data-col="1" data-row="60"></div>
						<div class="parkJade edgeV" data-col="1" data-row="43" style="height:680px"></div>
					</div>

					<div class="group" data-x="0" data-y="0">	
						<div class="border_lightsalmon box" data-col="7" data-row="3" data-elevation="3112">086<br>加利 <div class="tip">A4</div> </div>
						<div class="line_lightsalmon hl" data-col="8" data-row="3"></div>
						<div class="border_lightsalmon box" data-col="9" data-row="3" data-elevation="3297">052<br>伊澤 <div class="tip">A4</div> </div>
						<div class="line_lightsalmon hl" data-col="10" data-row="3"></div>
						<div class="line_lightsalmon slash" data-col="10" data-row="4"></div>
						<div class="border_lightsalmon box" data-col="9" data-row="5" data-elevation="3418">035<br>小霸 <div class="tip">B4</div> </div>
						<div class="border_lightsalmon box" data-col="11" data-row="3" data-elevation="3492">029<br>大霸 <div class="tip">B4</div> </div>
					</div>

					<div class="group" data-x="0" data-y="0">				
						<div class="line_gray dotted vl" data-col="11" data-row="3" style="height: 100px; margin-top: 40px;"><span class="routeTextV">聖稜線</span></div>
						<div class="line_gray dotted hl" data-col="12" data-row="4" style="width: 80px; margin-left: -18px;"><span class="routeText">霸南線</span></div>
						<div class="line_gray dotted vl" data-col="13" data-row="4" style="margin-top: 20px;"></div>
						<div class="line_gray dotted slash" data-col="11" data-row="6"><span class="routeText">聖稜線</span></div>

						<div class="border_orange box" data-col="12" data-row="5" data-elevation="3524">024<br>品田 <div class="tip">B3</div> </div>
						<div class="line_orange hl" data-col="13" data-row="5"></div>
						<div class="border_orange box" data-col="14" data-row="5" data-elevation="3303">051<br>池有 <div class="tip">A3</div> </div>
						<div class="line_orange hl" data-col="15" data-row="5"></div>
						<div class="border_orange box" data-col="16" data-row="5" data-elevation="3325">048<br>桃山 <div class="tip">A3</div> </div>
						<div class="line_orange hl" data-col="17" data-row="5"></div>
						<div class="border_orange box" data-col="18" data-row="5" data-elevation="3133">084<br>喀拉業 <div class="tip">A3</div> </div>
						
						<div class="border_yellow box" data-col="10" data-row="7" data-elevation="3703">010<br>雪北 <div class="tip">B3</div> </div>
						<div class="line_yellow vl" data-col="10" data-row="8"></div>
						<div class="border_yellow box" data-col="10" data-row="9" data-elevation="3886">002<br>雪主 <div class="tip">B2</div> </div>
						<div class="line_yellow slash1" data-col="11" data-row="8" style="translate: 0px 0px;"></div>
						<div class="line_lightgreen slash1" data-col="11" data-row="8" style="width:50px; translate: 0px 4px;"></div>
						<div class="border_yellow box" data-col="12" data-row="8" data-elevation="3201">075<br>雪東 <div class="tip">A2</div> </div>
						<div class="line_gray dotted backslash1" data-col="11" data-row="10"><span class="routeText">志雪線</span></div>
						<div class="border_yellow box" data-col="12" data-row="10" data-elevation="3289">054<br>志佳陽 <div class="tip">A3</div> </div>
						
						<div class="line_lightgreen hl" data-col="9" data-row="9"></div>
						<div class="border_lightgreen box" data-col="8" data-row="9" data-elevation="3310">050<br>火石 <div class="tip">B3</div> </div>
						<div class="line_lightgreen hl" data-col="7" data-row="9"></div>
						<div class="border_lightgreen box" data-col="6" data-row="9" data-elevation="3510">026<br>頭鷹 <div class="tip">C3</div> </div>
						<div class="line_lightgreen hl" data-col="5" data-row="9"></div>
						<div class="border_lightgreen box" data-col="4" data-row="9" data-elevation="3530">023<br>大雪 <div class="tip">C3</div> </div>
						<div class="line_lightgreen hl" data-col="3" data-row="9"></div>
						<div class="border_lightgreen box" data-col="2" data-row="9" data-elevation="3173">079<br>中雪 <div class="tip">C3</div> </div>
					
						<div class="line_gray dotted slash" data-col="9" data-row="10"><span class="routeText">雪劍線</span></div>
					
						<div class="border_green box" data-col="8" data-row="11" data-elevation="3594">018<br>大劍 <div class="tip">B3</div> </div>
						<div class="line_green hl" data-col="7" data-row="11"></div>
						<div class="border_green box" data-col="6" data-row="11" data-elevation="3314">049<br>佳陽 <div class="tip">B3</div> </div>
						<div class="line_green hl" data-col="5" data-row="11"></div>
						<div class="border_green box" data-col="4" data-row="11" data-elevation="3253">064<br>小劍 <div class="tip">B3</div> </div>
					
						<div class="border_teal box" data-col="2" data-row="13" data-elevation="3341">044<br>白姑 <div class="tip">B2</div> </div>
					</div>

					<div class="group" data-x="0" data-y="0">
						<div class="border_red box" data-col="17" data-row="8" data-elevation="3141">083<br>審馬陣 <div class="tip">A3</div> </div>	
						<div class="line_red hl" data-col="18" data-row="8"></div>
						<div class="border_red box" data-col="19" data-row="8" data-elevation="3536">022<br>南湖北 <div class="tip">B3</div> </div>
						<div class="line_red vl" data-col="19" data-row="9"></div>
						<div class="line_red backslash" data-col="20" data-row="9"></div>
						<div class="border_red box" data-col="19" data-row="10" data-elevation="3742">008<br>南湖主 <div class="tip">B3</div> </div>
						<div class="line_red hl" data-col="20" data-row="10"></div>
						<div class="border_red box" data-col="21" data-row="10" data-elevation="3632">014<br>南湖東 <div class="tip">C3</div> </div>
						<div class="line_red backslash" data-col="22" data-row="11"></div>
						<div class="border_red box" data-col="23" data-row="12" data-elevation="3211">073<br>馬比杉 <div class="tip">B3</div> </div>
						<div class="line_red vl" data-col="19" data-row="11"></div>
						<div class="border_red box" data-col="19" data-row="12" data-elevation="3470">027<br>南湖南 <div class="tip">B3</div> </div>
						<div class="line_red vl" data-col="19" data-row="13"></div>
						<div class="border_red box" data-col="19" data-row="14" data-elevation="3449">032<br>巴巴 <div class="tip">B3</div> </div>
					</div>
					
					<div class="group" data-x="0" data-y="0">		
						<div class="line_gray dotted backslash1" data-col="18" data-row="14"><span class="routeText">巴巴南稜</span></div>
						<div class="line_gray dotted slash1" data-col="18" data-row="12"><span class="routeText" style="translate: -4px 0px;">中央尖溪</span></div>
						<div class="border_red box" data-col="17" data-row="13" data-elevation="3705">011<br>中央尖 <div class="tip">C3</div> </div>
						<div class="line_gray dotted hl" data-col="16" data-row="13"><span class="routeText">死亡稜線</span></div>
						<div class="line_tomato hl" data-col="14" data-row="13"></div>
						<div class="border_tomato box" data-col="15" data-row="13" data-elevation="3158">081<br>甘薯 <div class="tip">B3</div> </div>
						<div class="line_tomato vl" data-col="15" data-row="14"></div>
						<div class="border_tomato box" data-col="15" data-row="15" data-elevation="3451">031<br>無明 <div class="tip">C3</div> </div>
						<div class="line_tomato hl" data-col="14" data-row="15"></div>	
						<div class="border_tomato box" data-col="13" data-row="15" data-elevation="3272">061<br>鈴鳴 <div class="tip">A3</div> </div>
						<div class="line_tomato vl" data-col="13" data-row="14"></div>
						<div class="border_tomato box" data-col="13" data-row="13" data-elevation="3168">080<br>閂山 <div class="tip">A3</div> </div>
						<div class="line_gray dotted vl" data-col="13" data-row="16"><span class="routeTextV">北畢祿</span></div>
						<div class="border_yellowgreen box" data-col="13" data-row="17" data-elevation="3371">039<br>畢祿 <div class="tip">B4</div> </div>
						<div class="line_yellowgreen hl" data-col="14" data-row="17"></div>
						<div class="border_yellowgreen box" data-col="15" data-row="17" data-elevation="3035">096<br>羊頭 <div class="tip">B2</div> </div>
						<div class="line_gray dotted vl" data-col="13" data-row="18"><span class="routeTextV">大禹嶺</span></div>
						<div class="border_skyblue box" data-col="13" data-row="19" data-elevation="3250">067<br>屏風 <div class="tip">B3</div> </div>
						<div class="line_aqua hl" data-col="14" data-row="21"></div>
						<div class="border_aqua box" data-col="15" data-row="21" data-elevation="3106">088<br>磐石 <div class="tip">B2</div> </div>
						<div class="line_aqua hl" data-col="16" data-row="21"></div>
						<div class="border_aqua box" data-col="17" data-row="21" data-elevation="3283">056<br>太魯閣 <div class="tip">C2</div> </div>
						<div class="line_aqua hl" data-col="18" data-row="21"></div>
						<div class="border_aqua box" data-col="19" data-row="21" data-elevation="3070">092<br>立霧主 <div class="tip">C2</div> </div>
						<div class="line_aqua hl" data-col="20" data-row="21"></div>
						<div class="border_aqua box" data-col="21" data-row="21" data-elevation="3101">089<br>帕托魯 <div class="tip">C2</div> </div>
						<div class="line_gray dotted hl" data-col="12" data-row="22" style="width: 60px"><span class="routeText">小奇萊</span></div>
						<div class="border_lightcyan box" data-col="11" data-row="22" data-elevation="3421">036<br>合歡東 <div class="tip">A1</div> </div>
						<div class="line_lightcyan hl" data-col="10" data-row="22"></div>
						<div class="border_lightcyan box" data-col="9" data-row="22" data-elevation="3417">037<br>合歡主 <div class="tip">A1</div> </div>
						<div class="line_lightcyan vl" data-col="9" data-row="21"></div>
						<div class="border_lightcyan box" data-col="9" data-row="20" data-elevation="3237">070<br>石門 <div class="tip">A1</div> </div>
						<div class="line_lightcyan vl" data-col="9" data-row="19"></div>
						<div class="border_lightcyan box" data-col="9" data-row="18" data-elevation="3422">034<br>北合歡 <div class="tip">A1</div> </div>
						<div class="line_lightcyan hl" data-col="8" data-row="18"></div>
						<div class="border_lightcyan box" data-col="7" data-row="18" data-elevation="3145">082<br>西合歡 <div class="tip">A2</div> </div>
						<div class="line_gray dotted vl" data-col="13" data-row="20"><span class="routeTextV">奇萊北壁</span></div>
						<div class="border_skyblue box" data-col="13" data-row="21" data-elevation="3607">016<br>奇萊北 <div class="tip">B2</div> </div>
						<div class="line_skyblue vl" data-col="13" data-row="22"></div>
						<div class="border_skyblue box" data-col="13" data-row="23" data-elevation="3560">020<br>奇萊主 <div class="tip">B2</div> </div>
						<div class="line_gray dotted vl" data-col="13" data-row="24"><span class="routeTextV">卡羅樓</span></div>
						<div class="border_skyblue box" data-col="13" data-row="25" data-elevation="3358">042<br>奇萊南 <div class="tip">B3</div> </div>
						<div class="line_skyblue vl" data-col="13" data-row="26"></div>
						<div class="border_skyblue box" data-col="13" data-row="27" data-elevation="3184">076<br>南華 <div class="tip">A3</div> </div>
						<div class="line_skyblue vl" data-col="13" data-row="28"></div>						
						<div class="border_skyblue box" data-col="13" data-row="29" data-elevation="3262">062<br>能高主 <div class="tip">B3</div> </div>
						<div class="line_skyblue vl" data-col="13" data-row="30"></div>
						<div class="border_skyblue box" data-col="13" data-row="31" data-elevation="3349">043<br>能高南 <div class="tip">C3</div> </div>
						<div class="line_skyblue vl" data-col="13" data-row="32"></div>
						<div class="border_skyblue box" data-col="13" data-row="33" data-elevation="3060">095<br>光頭 <div class="tip">C3</div> </div>
						<div class="line_skyblue vl" data-col="13" data-row="34"></div>
						<div class="border_skyblue box" data-col="13" data-row="35" data-elevation="3110">087<br>白石 <div class="tip">C3</div> </div>
						<div class="line_skyblue vl" data-col="13" data-row="36"></div>
						<div class="border_skyblue box" data-col="13" data-row="37" data-elevation="3068">094<br>安東軍 <div class="tip">C3</div> </div>
					</div>

					<div class="group" data-x="0" data-y="0">		
						<div class="border_purple box" data-col="5" data-row="35" data-elevation="3284">055<br>干卓萬 <div class="tip">B4</div> </div>
						<div class="line_purple hl" data-col="6" data-row="35"></div>
						<div class="border_purple box" data-col="7" data-row="35" data-elevation="3241">069<br>牧山 <div class="tip">C4</div> </div>
						<div class="line_purple hl" data-col="8" data-row="35"></div>
						<div class="border_purple box" data-col="9" data-row="35" data-elevation="3258">063<br>火山 <div class="tip">C4</div> </div>
						<div class="line_purple vl" data-col="6" data-row="36" style="height:60px; translate:0px -20px;"></div>
						<div class="border_purple box" data-col="6" data-row="37" data-elevation="3341">040<br>卓社 <div class="tip">C4</div> </div>
						<div class="line_gray dotted backslash hiddenInMobile" data-col="10" data-row="36" style="translate: -2px -2px;"><span class="routeText" style="translate: 16px 0px;">萬東山、</span></div>
						<div class="line_gray dotted backslash hiddenInMobile" data-col="11" data-row="37"><span class="routeText">卡社溪源</span></div>
						<div class="line_gray dotted backslash hiddenInMobile" data-col="12" data-row="38" style="width: 20px;translate: 11px -9px;"></div>						
						<div class="line_gray dotted hl hiddenInMobile" data-col="13" data-row="38" style="width:80px; translate: -20px 0px;"></div>
						<div class="line_gray dotted backslash" data-col="14" data-row="38"><span class="routeText" style="translate: 0px -18px;">草山摩即</span></div>
						<div class="border_teal box" data-col="15" data-row="39" data-elevation="2999">099<br>六順 <div class="tip">B5</div> </div>
						<div class="line_gray dotted backslash" data-col="16" data-row="40"><span class="routeText" style="translate: 0px -18px;">關門山</span></div>
						<div class="line_gray dotted backslash" data-col="16" data-row="40"><span class="routeText" style="translate: 0px 0px;">大石公</span></div>
						<div class="border_blue box" data-col="17" data-row="41" data-elevation="3325">047<br>丹大 <div class="tip">D4</div> </div>
						<div class="line_blue hl" data-col="16" data-row="41"></div>
						<div class="border_blue box" data-col="15" data-row="41" data-elevation="3275">060<br>內嶺爾 <div class="tip">D4</div> </div>
						<div class="line_blue hl" data-col="14" data-row="41"></div>
						<div class="border_blue box" data-col="13" data-row="41" data-elevation="3245">065<br><span class="small_span_label">義西<br>請馬至</span> <div class="tip">D4</div> </div>
						<div class="line_blue hl" data-col="12" data-row="41"></div>
						<div class="border_blue box" data-col="11" data-row="41" data-elevation="3619">015<br>東郡 <div class="tip">E4</div> </div>
						<div class="line_blue vl" data-col="11" data-row="40"></div>
						<div class="border_blue box" data-col="11" data-row="39" data-elevation="3468">030<br>東巒 <div class="tip">E4</div> </div>
						<div class="line_blue hl" data-col="10" data-row="41"></div>
						<div class="border_blue box" data-col="9" data-row="41" data-elevation="3231">068<br>無雙 <div class="tip">E4</div> </div>
						<div class="line_gray dotted hl" data-col="8" data-row="41"><span class="routeText">郡大林道</span></div>
						<div class="border_blue box" data-col="7" data-row="41" data-elevation="3265">057<br>郡大 <div class="tip">A1</div> </div>
						<div class="line_gray dotted vl" data-col="7" data-row="40"><span class="routeTextV">金子清水</span></div>
						<div class="border_blue box" data-col="7" data-row="39" data-elevation="3081">091<br>西巒 <div class="tip">A3</div> </div>
						<div class="line_gray dotted hl" data-col="8" data-row="39"></div>
						<div class="line_gray dotted hl" data-col="9" data-row="39"><span class="routeText">伊巴厚社</span></div>
						<div class="line_gray dotted hl" data-col="10" data-row="39"></div>
					</div>
					
					<div class="group" data-x="0" data-y="0">
						<div class="line_gray dotted hl" data-col="7" data-row="45" style="width:60px; margin-left:20px;"></div>
						<div class="line_gray dotted vl" data-col="7" data-row="45" style="height:60px; margin-top:20px;"><span class="routeTextV">勞濃溪</span></div>
						<div class="line_gray dotted hl" data-col="7" data-row="46" style="width:20px; margin-top:18px;"></div>
						<div class="line_gray dotted vl" data-col="13" data-row="42"><span class="routeTextV">嘆息灣</span></div>
						<div class="border_navy box" data-col="9" data-row="43" data-elevation="3022">097<br>盆駒 <div class="tip">C4</div> </div>
						<div class="line_navy hl" data-col="10" data-row="43"></div>
						<div class="border_navy box" data-col="11" data-row="43" data-elevation="3785">007<br><span class="small_span_label">馬博<br>拉斯</span> <div class="tip">C4</div> </div>
						<div class="line_navy hl" data-col="12" data-row="43"></div>
						<div class="border_navy box" data-col="13" data-row="43" data-elevation="3546">021<br><span class="small_span_label">馬利<br>加南</span> <div class="tip">D4</div> </div>
						<div class="line_navy hl" data-col="14" data-row="43"></div>
						<div class="border_navy box" data-col="15" data-row="43" data-elevation="3443">033<br>馬西 <div class="tip">D4</div> </div>
						<div class="line_navy hl" data-col="16" data-row="43"></div>
						<div class="border_navy box" data-col="17" data-row="43" data-elevation="3279">058<br><span class="small_span_label">喀西<br>帕南</span> <div class="tip">D4</div> </div>
						<div class="line_navy vl" data-col="11" data-row="44"></div>	
						<div class="border_jade box" data-col="6" data-row="45" data-elevation="3858">004<br>玉北 <div class="tip">B3</div> </div>
						<div class="line_jade vl" data-col="6" data-row="46"></div>
						<div class="border_jade box" data-col="6" data-row="47" data-elevation="3952">001<br>玉主 <div class="tip">B2</div> </div>
						<div class="line_jade vl" data-col="6" data-row="48"></div>
						<div class="line_jade hl" data-col="7" data-row="47"></div>
						<div class="line_jade hl" data-col="5" data-row="47"></div>
						<div class="line_jade hl" data-col="3" data-row="47"></div>
						<div class="border_jade box" data-col="8" data-row="47" data-elevation="3869">003<br>玉東 <div class="tip">B3</div> </div>
						<div class="border_jade box" data-col="4" data-row="47" data-elevation="3490">025<br>玉西 <div class="tip">B3</div> </div>
						<div class="border_jade box" data-col="2" data-row="47" data-elevation="3239">071<br>玉前 <div class="tip">B2</div> </div>
						<div class="border_jade box" data-col="6" data-row="49" data-elevation="3844">005<br>玉南 <div class="tip">B3</div> </div>
						<div class="line_jade vl" data-col="6" data-row="50"></div>
						<div class="line_jade hl" data-col="7" data-row="49"></div>
						<div class="line_jade hl" data-col="5" data-row="49"></div>
						<div class="border_jade box" data-col="8" data-row="49" data-elevation="2981">100<br>鹿山 <div class="tip">B3</div> </div>
						<div class="border_jade box" data-col="6" data-row="51" data-elevation="3711">009<br>東小南 <div class="tip">B3</div> </div>
						<div class="border_jade box" data-col="4" data-row="49" data-elevation="3383">038<br>南玉山 <div class="tip">B3</div> </div>
						<div class="border_palevioletred box" data-col="9" data-row="45" data-elevation="3284">046<br>八通關 <div class="tip">B3</div> </div>
						<div class="line_navy hl" style="translate:0px -3px;" data-col="10" data-row="45"></div>
						<div class="line_palevioletred hl" style="translate:0px 3px;" data-col="10" data-row="45"></div>
						<div class="line_palevioletred backslash" data-col="10" data-row="46"></div>
						<div class="border_palevioletred box" data-col="11" data-row="45" data-elevation="3805">006<br>秀姑巒 <div class="tip">B3</div> </div>
						<div class="line_palevioletred vl" data-col="11" data-row="46"></div>
						<div class="border_palevioletred box" data-col="11" data-row="47" data-elevation="3642">013<br>大水窟 <div class="tip">B3</div> </div>
						<div class="line_palevioletred vl" data-col="11" data-row="48"></div>
						<div class="border_palevioletred box" data-col="11" data-row="49" data-elevation="3307">074<br>達芬尖 <div class="tip">D4</div> </div>
						<div class="line_palevioletred vl" data-col="11" data-row="50"></div>
						<div class="border_palevioletred box" data-col="11" data-row="51" data-elevation="3204">093<br>塔芬 <div class="tip">C4</div> </div>
						<div class="line_palevioletred vl" data-col="11" data-row="52"></div>
						<div class="border_palevioletred box" data-col="11" data-row="53" data-elevation="3267">059<br>轆轆 <div class="tip">C4</div> </div>
						<div class="line_palevioletred vl" data-col="11" data-row="54"></div>	
						<div class="line_palevioletred hl" data-col="10" data-row="54" style="width: 60px;"></div>
						<div class="border_palevioletred box" data-col="9" data-row="54" data-elevation="3564">019<br>雲峰 <div class="tip">C4</div> </div>
						<div class="border_palevioletred box" data-col="11" data-row="55" data-elevation="3355">041<br>南雙頭 <div class="tip">C4</div> </div>
						<div class="line_palevioletred vl" data-col="11" data-row="56"></div>	
						<div class="border_palevioletred box" data-col="11" data-row="57" data-elevation="3496">028<br>三叉 <div class="tip">A2</div> </div>
						<div class="line_palevioletred hl" data-col="10" data-row="57" style="translate: 0px -2px;"></div>	
						<div class="line_cornflowerblue hl" data-col="10" data-row="57" style="translate: 0px 2px;"></div>	
						<div class="border_palevioletred box" data-col="9" data-row="57" data-elevation="3603">017<br>向陽 <div class="tip">B2</div> </div>			
						<div class="line_cornflowerblue hl" data-col="12" data-row="57"></div>	
						<div class="border_cornflowerblue box" data-col="13" data-row="57" data-elevation="3324">045<br>新康 <div class="tip">C4</div> </div>		
						<div class="line_cornflowerblue vl" data-col="12" data-row="57" style="height:60px; margin-top:20px;"></div>
						<div class="border_cornflowerblue box" data-col="12" data-row="59" data-elevation="3020">098<br><span class="small_span_label">布拉<br>克桑</span> <div class="tip">B4</div> </div>		
						<div class="line_gray dotted hl" data-col="8" data-row="57"><span class="routeText">南橫</span></div>	
						<div class="border_pink box" data-col="7" data-row="57" data-elevation="3176">077<br>關山嶺 <div class="tip">A1</div> </div>	
						<div class="line_gray dotted hl" data-col="6" data-row="57"><span class="routeText">南橫</span></div>	
						<div class="border_pink box" data-col="5" data-row="57" data-elevation="3222">072<br>塔關 <div class="tip">A1</div> </div>
						<div class="line_gray dotted hl" data-col="4" data-row="57"><span class="routeText">南橫</span></div>	
						<div class="border_pink box" data-col="3" data-row="57" data-elevation="3115">085<br><span class="small_span_label">庫哈<br>諾辛</span> <div class="tip">A1</div> </div>
						<div class="line_pink vl" data-col="3" data-row="58"></div>	
						<div class="border_pink box" data-col="3" data-row="59" data-elevation="3668">012<br>關山 <div class="tip">B3</div> </div>
						<div class="line_pink vl" data-col="3" data-row="60"></div>	
						<div class="border_pink box" data-col="3" data-row="61" data-elevation="3175">078<br>海諾南 <div class="tip">B3</div> </div>
						<div class="line_pink vl" data-col="3" data-row="62"></div>
						<div class="border_pink box" data-col="3" data-row="63" data-elevation="3249">066<br>小關山 <div class="tip">B3</div> </div>
						<div class="line_pink vl" data-col="3" data-row="64"></div>	
						<div class="border_pink box" data-col="3" data-row="65" data-elevation="3295">053<br>卑南主 <div class="tip">B3</div> </div>		
						<div class="border_crimson box" data-col="3" data-row="67" data-elevation="3092">090<br>北大武 <div class="tip">A2</div> </div>
					</div>
				</div>				
				
				<!------------------------------------------------------------------------------------------->
			</div>
		

		</div>
	
		<!------------------------------------------------------------------------------------ FIREBASE START ------------------------------------------------------------------------------------------------>
		<div style="position: relative;">		
			<div id="authbox" class="auth-section no-print" align="center">
		
				<span id="loginForm" class="hidden" style="diplay: inline-block;padding:8px; background-color: #e9e9e9;">
					<input type="email" id="email" placeholder="電子郵件" style="width:150px;">
					<input type="password" id="password" placeholder="密碼 (至少六位數)" style="width:150px;">
					<button class="button" id="btnLogin">登入</button>
					<button  class="button"id="btnForgotPassword">忘記密碼</button>
					<button class="button" id="btnRegister">註冊</button>
				</span>			
				
				
				<span id="userInfo" class="hidden" style="diplay: inline-block;padding:8px; background-color: #b9e9ff;">
					<span id="userEmail" class="text-email">user123456789@youremailserver.com</span>
					<button class="button" id="btnLogout">登出</button>
					<button class="button" id="btnChangePassword">改密碼</button>
				</span>
				
				
				<span id="dataSection" class="hidden" style="diplay: inline-block;">
					<span style="color:#fff;background-color:#fff; width:1px;diplay: inline-block;">|</span>
				
					<span style="diplay: inline-block;padding:8px; background-color: #a9f9a9;">
						<button class="button" id="btnSave">儲存</button>
					</span>
					
					<span style="color:#fff;background-color:#fff; width:1px;diplay: inline-block;">|</span>
					
					<span style="diplay: inline-block;padding:8px; background-color: #ffc9f9;">
						<input type="text" id="LinkShareBox" readonly style="display:none;width:10px;" onclick="this.select();" title="點擊全選">
						<button class="button" id="btnCopy" style="white-space: nowrap; cursor: pointer;">複製分享網址</button>
					</span>
				</span>
				
			</div>
			
			<div >	        
				<input class="hidden" type="checkbox" id="isLockedAndHideControl" checked>
			</div>
			
			<div id="manualInputDataSection" class="hidden" style="z-index: 4; position: fixed; left:10px; right:250px; top:120px; margin:0px; height: auto; background-color: #f7f7f7;	box-shadow: 3px 3px 3px 3px rgba(0, 0, 0, 0.2);	opacity: 0.9;	padding: 8px;	border: 1px solid #ccc;">
				<p>fieldSummits<textarea id="fieldSummits" style="width:100%;height: 20px;"></textarea>	</p>
				<p>fieldMinorPeaks<textarea id="fieldMinorPeaks" style="width:100%;height: 20px;"></textarea></p>
			</div>

			<div id="info" align="center" class="no-print">
				
					<span style="diplay: inline-block;padding:8px; background-color: #d9ffc9;">
						<span class="label">暱稱</span>
						<input id="input_name" class="label" type="text" maxlength=32></input>
						<input class="button" type="button" value="設定" onclick="SetName();"></input>
					</span>
					
					<span style="color:#fff;background-color:#fff; width:1px;diplay: inline-block;">|</span>
					
					<span style="diplay: inline-block;padding:8px; background-color: #f9e9a9;">
						<input type="button" value="？" onclick="ShowLevelTip();"></input>
						<span class="label">顯示風險體能等級</span>
						<input id="input_showlevel" class="label" type="checkbox" onclick="SetShowLevel();"></input>
					</span>
					
					<span style="color:#fff;background-color:#fff; width:1px;diplay: inline-block;">|</span>
					
					<span style="diplay: inline-block;padding:8px; background-color: #ffc9c9;">
						<input class="button" type="button" value="清除資料" onclick="ClearAll();"></input>
					</span>
					
			</div>
			
		</div>
		 <script type="module">
			import { auth, db } from './firebase-config.js';			
			import { signInWithEmailAndPassword, createUserWithEmailAndPassword, signOut, onAuthStateChanged, updatePassword, sendPasswordResetEmail } from "https://www.gstatic.com/firebasejs/12.7.0/firebase-auth.js";
			import { ref, set, get } from "https://www.gstatic.com/firebasejs/12.7.0/firebase-database.js";

			// --- 註冊功能 ---
			document.getElementById('btnRegister').onclick = async () => {
				const email = document.getElementById('email').value;
				const pass = document.getElementById('password').value;

				if (pass.length < 6) {
					alert("密碼長度至少需要 6 位元");
					return;
				}

				try {
					const userCredential = await createUserWithEmailAndPassword(auth, email, pass);
					alert("註冊成功並已自動登入！");
					console.log("新用戶:", userCredential.user.uid);
				} catch (error) {
					// 常見錯誤：信箱格式不符、帳號已存在
					let msg = "註冊失敗: ";
					switch (error.code) {
						case 'auth/email-already-in-use': msg += "此信箱已被註冊"; break;
						case 'auth/invalid-email': msg += "信箱格式不正確"; break;
						case 'auth/weak-password': msg += "密碼強度不足"; break;
						default: msg += error.message;
					}
					alert(msg);
				}
			};

			// --- 1. 初始化讀取 (分享模式) ---
			window.addEventListener('load', async () => {
				const urlParams = new URLSearchParams(window.location.search);
				const sharedId = urlParams.get('id');
				const user = auth.currentUser; // 取得目前登入的使用者物件
				if (sharedId) {
					console.log("正在讀取分享 ID:", sharedId);
					const snapshot = await get(ref(db, `users/${sharedId}`));
					if (snapshot.exists()) {
						const data = snapshot.val();
						// 將讀取到的 JSON 填入欄位
						document.getElementById('input_name').value = data.name || "";
						document.getElementById('input_showlevel').checked = data.showLevel || false;
						document.getElementById('fieldSummits').value = data.summits || "";
						document.getElementById('fieldMinorPeaks').value = data.minorPeaks || "";
						document.getElementById('authbox').classList.add('hidden');
						SetAllPos();
					}
				}
				else if(user)
				{
					console.log("正在讀取Auth User ID:", user.uid);
					const snapshot = await get(ref(db, `users/${user.uid}`));
					if (snapshot.exists()) {
						const data = snapshot.val();
						// 將讀取到的 JSON 填入欄位
						document.getElementById('input_name').value = data.name || "";
						document.getElementById('input_showlevel').checked = data.showLevel || false;						
						document.getElementById('fieldSummits').value = data.summits || "";
						document.getElementById('fieldMinorPeaks').value = data.minorPeaks || "";
						document.getElementById('authbox').classList.remove('hidden');// 產生分享網址
						const link = `${window.location.origin}${window.location.pathname}?id=${user.uid}`;					
						document.getElementById('LinkShareBox').value = link;
						SetAllPos();
					}
				}
				else
				{
					document.getElementById('authbox').classList.remove('hidden');
				}
			});

			// --- 2. 身份狀態變更監聽 ---
			onAuthStateChanged(auth, async (user) => {
				const urlParams = new URLSearchParams(window.location.search);
				const sharedId = urlParams.get('id');
				if (user && !sharedId) {
					document.getElementById('loginForm').classList.add('hidden');
					document.getElementById('userInfo').classList.remove('hidden');
					document.getElementById('userEmail').innerText = user.email;					
					const uid = user.uid; // 取得 UID		
					const snapshot = await get(ref(db, `users/${uid}`));
					if (snapshot.exists()) {
						const data = snapshot.val();
						// 將讀取到的 JSON 填入欄位
						document.getElementById('input_name').value = data.name || "";
						document.getElementById('input_showlevel').checked = data.showLevel || false;
						document.getElementById('fieldSummits').value = data.summits || "";
						document.getElementById('fieldMinorPeaks').value = data.minorPeaks || "";
					}					
					// 產生分享網址
					const link = `${window.location.origin}${window.location.pathname}?id=${user.uid}`;					
					document.getElementById('LinkShareBox').value = link;
					
					// 綁定複製按鈕功能 (如果有的話)
					document.getElementById('btnCopy').onclick = () => {
						document.getElementById('LinkShareBox').select(); // 選取文字
						navigator.clipboard.writeText(link).then(() => {
							alert("網址已複製到剪貼簿！");
						});
					};
					
					document.getElementById('isLockedAndHideControl').checked = false;
					//document.getElementById('manualInputDataSection').classList.remove('hidden');
					document.getElementById('dataSection').classList.remove('hidden');
					document.getElementById('authbox').classList.remove('hidden');
					SetAllPos();
				} else {
					document.getElementById('loginForm').classList.remove('hidden');
					document.getElementById('userInfo').classList.add('hidden');
					document.getElementById('isLockedAndHideControl').checked = true;
					document.getElementById('manualInputDataSection').classList.add('hidden');
					document.getElementById('dataSection').classList.add('hidden');
					SetAllPos();
				}
			});

			// --- 3. 儲存功能 (JSON 格式) ---
			document.getElementById('btnSave').onclick = async () => {
				const user = auth.currentUser;
				if (!user) {
					alert("請先登入才能儲存資料！");
					return;
				}

				// 準備要儲存的 JSON 物件
				const userData = {
					name: document.getElementById('input_name').value,
					showLevel: document.getElementById('input_showlevel').checked,
					minorPeaks: document.getElementById('fieldMinorPeaks').value,
					summits: document.getElementById('fieldSummits').value,
					updatedAt: Date.now()
				};

				try {
					// 直接將物件存入該使用者的路徑
					await set(ref(db, `users/${user.uid}`), userData);
					alert("資料已成功儲存！");
				} catch (error) {
					console.error(error);
					alert("儲存失敗，請檢查 Firebase 規則。");
				}
			};

			// --- 4. 登入/登出事件 ---
			document.getElementById('btnLogin').onclick = async () => {
				const email = document.getElementById('email').value;
				const pass = document.getElementById('password').value;
				try {
					const userCredential = await signInWithEmailAndPassword(auth, email, pass);
					alert("登入成功！");
					const uid = userCredential.user.uid;
					const snapshot = await get(ref(db, `users/${uid}`));
					if (snapshot.exists()) {
						const data = snapshot.val();
						// 將讀取到的 JSON 填入欄位
						document.getElementById('input_name').value = data.name || "";
						document.getElementById('input_showlevel').checked = data.showLevel || false;
						document.getElementById('fieldSummits').value = data.summits || "";
						document.getElementById('fieldMinorPeaks').value = data.minorPeaks || "";
					}
					SetAllPos();
				} catch (e) { 
					alert("登入失敗: 帳號或密碼錯誤"); 
				}
			};

			document.getElementById('btnLogout').onclick = () => signOut(auth);
			
			document.getElementById('btnForgotPassword').onclick = async () => {
				const email = document.getElementById('email').value; // 取得輸入框的 Email
				if (!email) {
					alert("請先輸入您的 Email 帳號");
					return;
				}

				try {
					await sendPasswordResetEmail(auth, email);
					alert("重設密碼信件已發送，請檢查您的信箱！");
				} catch (error) {
					console.error(error);
					alert("發送失敗：" + error.message);
				}
			};
			
			document.getElementById('btnChangePassword').onclick = async () => {
				// 彈出瀏覽器預設輸入框
				const newPassword = window.prompt("請輸入新密碼 (至少 6 位數)：");
				// 如果使用者按了「取消」或沒輸入內容
				if (newPassword === null || newPassword === "") return;

				if (newPassword.length < 6) {
					alert("密碼太短了！");
					return;
				}
				const user = auth.currentUser;
				try {
					await updatePassword(user, newPassword);
					alert("密碼已成功修改！");
				} catch (error) {
					if (error.code === 'auth/requires-recent-login') {
						alert("安全性因素，請登出重新登入後再修改密碼。");
					} else {
						alert("錯誤：" + error.message);
					}
				}
			};

		</script>
		
		<!------------------------------------------------------------------------------------ FIREBASE END ------------------------------------------------------------------------------------------------>
		
		<script>
			function drawFakeContours() {
				const isMobile = window.matchMedia("only screen and (max-width: 1080px)").matches;
				const svg = document.getElementById('contour-layer');
				const nodes = document.querySelectorAll('.box');
				let svgContent = '';

				nodes.forEach(node => {
					// 1. 取得節點相對於容器的中心位置
					const elevation = node.dataset.elevation;
					const rect = node.getBoundingClientRect();
					const containerRect = document.getElementById('maincontainer').getBoundingClientRect();
					
					const centerX = node.offsetLeft + (node.offsetWidth / 2);
					const centerY = node.offsetTop + (node.offsetHeight / 2);

					// 2. 模擬高度（這裡可以從你的 data 屬性讀取，或是隨機生成）
					// 假設你的 .box 裡面有編號，我們用它來當高度參考
					const heightLevel = (elevation - 2900) / 100+1; // 畫三圈
					const size = (isMobile? 72 : 56)/ (heightLevel);
					

					for (let i = 1; i <= 10; i++) 
					{
							
						// 假設 i 是目前的圈數 (1, 2, 3...)
						// width 和 height 是這一圈 round box 的大小
						let rectW = (isMobile? 124 : 96) - i * size; // 寬度隨圈數增加
						let rectH = (isMobile? 124 : 96) - i * size; // 高度隨圈數增加
						let cornerRadius = 20 - i * size/8; // 圓角半徑也隨之增加，更有等高線感
						
						rectW = Math.max(0, rectW);
						rectH = Math.max(0, rectH);
						cornerRadius = Math.max(0, cornerRadius);
						
						let t = i / 9; 
						let lightness = 50+(t * 25); 
						let hue =  60+ (1-t) * 60;
						let sat = t*100;
						let strokeColor = `hsl(${hue}, ${sat}%, ${lightness}%)`;

						svgContent += `
							<rect 
								x="${centerX - rectW / 2}" 
								y="${centerY - rectH / 2}" 
								width="${rectW}" 
								height="${rectH}" 
								rx="${cornerRadius}" 
								ry="${cornerRadius}"
								style="
									filter: url(#rugged);
									fill: none;
									stroke: ${strokeColor};
									stroke-width: ${size/(isMobile?3:4)};
									stroke-opacity: ${t*0.75+0.25};
									mix-blend-mode: lighten; /* 或是 overlay, lighten, color-dodge */
								" 
							/>`;
					}
				});

				svg.innerHTML = svgContent;
			}

			// 在你的排版 JS 執行完畢後呼叫
			window.addEventListener('load', drawFakeContours);
		</script>
	</body>
</html>